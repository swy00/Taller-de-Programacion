programa ej4BP4
procesos
  proceso enviarId
  comenzar
    EnviarMensaje(1,r1)
    EnviarMensaje(2,r2)
    EnviarMensaje(3,r3)
    EnviarMensaje(4,r4)
  fin
  
areas
  esquinaTomar:AreaPC(10,10,10,10)
  esquinaDeposito:AreaC(11,11,11,11)
  areaRC:AreaP(1,1,1,1)
  areaR1:AreaP(9,9,9,9)
  areaR2:AreaP(9,10,9,10)
  areaR3:AreaP(9,11,9,11)
  areaR4:AreaP(9,12,9,12)
robots
  robot cordinador
  variables
    id:numero
  comenzar
    enviarId
    repetir 4
      RecibirMensaje(id,*)
    Informar('ElUltimoRobotFue',id)   
    Pos(11,11)
    mientras(HayFlorEnLaEsquina)
      tomarFlor 
  fin
  robot tipo1
  variables
    id:numero
    av,ca:numero
    end:boolean
  comenzar
    av:=PosAv
    ca:=PosCa
    end:=V
    RecibirMensaje(id,rC)
    mientras(end)
      BloquearEsquina(10,10)
      Pos(10,10)
      si(HayFlorEnLaEsquina)
        tomarFlor
        Pos(av,ca)
        LiberarEsquina(10,10)
        BloquearEsquina(11,11)
        Pos(11,11)
        depositarFlor
        Pos(av,ca)
        LiberarEsquina(11,11)
      sino
        end:=F
        Pos(av,ca)
        LiberarEsquina(10,10)
    EnviarMensaje(id,rC)
  fin
variables
  rC:cordinador
  r1:tipo1
  r2:tipo1
  r3:tipo1
  r4:tipo1
comenzar
  AsignarArea(rC,areaRC)
  AsignarArea(rC,esquinaDeposito)
  AsignarArea(r1,areaR1)
  AsignarArea(r1,esquinaTomar)
  AsignarArea(r1,esquinaDeposito)
  AsignarArea(r2,areaR2)
  AsignarArea(r2,esquinaTomar)
  AsignarArea(r2,esquinaDeposito)
  AsignarArea(r3,areaR3)
  AsignarArea(r3,esquinaTomar)
  AsignarArea(r3,esquinaDeposito)
  AsignarArea(r4,areaR4)
  AsignarArea(r4,esquinaTomar)
  AsignarArea(r4,esquinaDeposito)
  Iniciar(rC,1,1)
  Iniciar(r1,9,9)
  Iniciar(r2,9,10)
  Iniciar(r3,9,11)
  Iniciar(r4,9,12)
fin
